/* 1️⃣ Select set of students based on course 
      and count the number of students */

-- Display students enrolled in a particular course (Example: 'DBMS')
SELECT s.student_id, s.student_name, s.department
FROM students s
JOIN enrollments e ON s.student_id = e.student_id
JOIN courses c ON e.course_id = c.course_id
WHERE c.course_name = 'DBMS';

-- Count number of students in that course
SELECT c.course_name, COUNT(s.student_id) AS total_students
FROM students s
JOIN enrollments e ON s.student_id = e.student_id
JOIN courses c ON e.course_id = c.course_id
WHERE c.course_name = 'DBMS'
GROUP BY c.course_name;



/* 2️⃣ Select set of courses a faculty is handling 
      and insert into a new table */

-- Create new table
CREATE TABLE faculty_courses AS
SELECT c.course_id, c.course_name, f.faculty_name
FROM courses c
JOIN faculty f ON c.faculty_id = f.faculty_id
WHERE f.faculty_name = 'Dr. Sharma';

-- View inserted records
SELECT * FROM faculty_courses;



/* 3️⃣ Select top 5 students from same department 
      and update their phone number with country code */

-- Select top 5 students from 'CSE' department
SELECT *
FROM students
WHERE department = 'CSE'
ORDER BY student_id ASC
LIMIT 5;

-- Update phone numbers by adding country code (+91)
UPDATE students
SET phone = '+91' || phone
WHERE student_id IN (
    SELECT student_id
    FROM students
    WHERE department = 'CSE'
    ORDER BY student_id ASC
    LIMIT 5
);